
--------------------------------------------------------------------------------
-- pieces
--------------------------------------------------------------------------------

local brazod = piece('brazod');
local brazoi = piece('brazoi');
local cabeza = piece('cabeza');
local capa = piece('capa');
local coxis = piece('coxis');
local coxiscentral = piece('coxiscentral');
local cuello = piece('cuello');
local espinillad = piece('espinillad');
local espinillai = piece('espinillai');
local flare = piece('flare');
local hombrerai = piece('hombrerai');
local hombrod = piece('hombrod');
local hombroi = piece('hombroi');
local manod = piece('manod');
local manoi = piece('manoi');
local muslod = piece('muslod');
local musloi = piece('musloi');
local pecho = piece('pecho');
local pied = piece('pied');
local piei = piece('piei');
local rifle = piece('rifle');
local root = piece('root');
local tapon = piece('tapon');

--------------------------------------------------------------------------------
-- constants
--------------------------------------------------------------------------------

local SIG_WALK = 1
local SIG_WALK1 = 2
local SIG_AIM = 4
local SIG_AIM1 = 8
local SIG_RESTORE = 16

local RESTORE_DELAY_SHOOT = 1500
local DELAY_SHOOT = 520

--------------------------------------------------------------------------------
-- vars
--------------------------------------------------------------------------------

local isMoving, isShooting, weaponAim = false, false, false

--------------------------------------------------------------------------------
-- tables
--------------------------------------------------------------------------------

local Animations = {};

Animations['restoreLegsAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=espinillad, ['a']=x_axis, ['t']=-2.067409, ['s']=1.000000},
			{['c']='move',['p']=espinillad, ['a']=y_axis, ['t']=1.555296, ['s']=1.000000},
			{['c']='move',['p']=espinillad, ['a']=z_axis, ['t']=7.033658, ['s']=1.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=pied, ['a']=x_axis, ['t']=-2.282368, ['s']=1.000000},
			{['c']='move',['p']=pied, ['a']=y_axis, ['t']=3.603570, ['s']=1.000000},
			{['c']='move',['p']=pied, ['a']=z_axis, ['t']=1.080602, ['s']=1.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=espinillai, ['a']=x_axis, ['t']=2.082659, ['s']=1.000000},
			{['c']='move',['p']=espinillai, ['a']=y_axis, ['t']=-2.114497, ['s']=1.000000},
			{['c']='move',['p']=espinillai, ['a']=z_axis, ['t']=7.350704, ['s']=1.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=musloi, ['a']=x_axis, ['t']=1.716741, ['s']=1.000000},
			{['c']='move',['p']=musloi, ['a']=y_axis, ['t']=0.232801, ['s']=1.000000},
			{['c']='move',['p']=musloi, ['a']=z_axis, ['t']=13.123219, ['s']=1.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=muslod, ['a']=x_axis, ['t']=-1.612402, ['s']=1.000000},
			{['c']='move',['p']=muslod, ['a']=y_axis, ['t']=0.232801, ['s']=1.000000},
			{['c']='move',['p']=muslod, ['a']=z_axis, ['t']=13.123219, ['s']=1.000000},
			{['c']='turn',['p']=coxis, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=coxis, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=coxis, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=coxis, ['a']=x_axis, ['t']=-0.028486, ['s']=1.000000},
			{['c']='move',['p']=coxis, ['a']=y_axis, ['t']=0.089688, ['s']=1.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=14.401241, ['s']=1.000000},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=piei, ['a']=x_axis, ['t']=2.228573, ['s']=1.000000},
			{['c']='move',['p']=piei, ['a']=y_axis, ['t']=-2.517084, ['s']=1.000000},
			{['c']='move',['p']=piei, ['a']=z_axis, ['t']=1.068017, ['s']=1.000000},
		}
	},
}


Animations['restoreTorsoAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=hombrod, ['a']=x_axis, ['t']=-3.247495, ['s']=1.000000},
			{['c']='move',['p']=hombrod, ['a']=y_axis, ['t']=-0.477668, ['s']=1.000000},
			{['c']='move',['p']=hombrod, ['a']=z_axis, ['t']=21.964031, ['s']=1.000000},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=manod, ['a']=x_axis, ['t']=-2.569294, ['s']=1.000000},
			{['c']='move',['p']=manod, ['a']=y_axis, ['t']=-4.105369, ['s']=1.000000},
			{['c']='move',['p']=manod, ['a']=z_axis, ['t']=16.921768, ['s']=1.000000},
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=1.000000},
			{['c']='move',['p']=capa, ['a']=y_axis, ['t']=1.609871, ['s']=1.000000},
			{['c']='move',['p']=capa, ['a']=z_axis, ['t']=22.714769, ['s']=1.000000},
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=4.176844, ['s']=1.000000},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-6.540286, ['s']=1.000000},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=19.490587, ['s']=1.000000},
			{['c']='turn',['p']=cuello, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=cuello, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=cuello, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=cuello, ['a']=x_axis, ['t']=0.003410, ['s']=1.000000},
			{['c']='move',['p']=cuello, ['a']=y_axis, ['t']=-0.739189, ['s']=1.000000},
			{['c']='move',['p']=cuello, ['a']=z_axis, ['t']=22.962957, ['s']=1.000000},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=hombroi, ['a']=x_axis, ['t']=3.247565, ['s']=1.000000},
			{['c']='move',['p']=hombroi, ['a']=y_axis, ['t']=-0.477668, ['s']=1.000000},
			{['c']='move',['p']=hombroi, ['a']=z_axis, ['t']=21.964031, ['s']=1.000000},
			{['c']='turn',['p']=manoi, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=manoi, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=manoi, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=manoi, ['a']=x_axis, ['t']=3.931734, ['s']=1.000000},
			{['c']='move',['p']=manoi, ['a']=y_axis, ['t']=-6.272565, ['s']=1.000000},
			{['c']='move',['p']=manoi, ['a']=z_axis, ['t']=18.272943, ['s']=1.000000},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=brazoi, ['a']=x_axis, ['t']=5.153582, ['s']=1.000000},
			{['c']='move',['p']=brazoi, ['a']=y_axis, ['t']=-1.178931, ['s']=1.000000},
			{['c']='move',['p']=brazoi, ['a']=z_axis, ['t']=16.645100, ['s']=1.000000},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=brazod, ['a']=x_axis, ['t']=-7.360277, ['s']=1.000000},
			{['c']='move',['p']=brazod, ['a']=y_axis, ['t']=-1.787073, ['s']=1.000000},
			{['c']='move',['p']=brazod, ['a']=z_axis, ['t']=18.253675, ['s']=1.000000},
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=cabeza, ['a']=x_axis, ['t']=-0.023054, ['s']=1.000000},
			{['c']='move',['p']=cabeza, ['a']=y_axis, ['t']=-1.154238, ['s']=1.000000},
			{['c']='move',['p']=cabeza, ['a']=z_axis, ['t']=26.139397, ['s']=1.000000},
			{['c']='turn',['p']=pecho, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=pecho, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=pecho, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=pecho, ['a']=x_axis, ['t']=0.003410, ['s']=1.000000},
			{['c']='move',['p']=pecho, ['a']=y_axis, ['t']=-0.477668, ['s']=1.000000},
			{['c']='move',['p']=pecho, ['a']=z_axis, ['t']=17.407320, ['s']=1.000000},
			{['c']='turn',['p']=hombrerai, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombrerai, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=hombrerai, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=hombrerai, ['a']=x_axis, ['t']=-0.023054, ['s']=1.000000},
			{['c']='move',['p']=hombrerai, ['a']=y_axis, ['t']=-0.439716, ['s']=1.000000},
			{['c']='move',['p']=hombrerai, ['a']=z_axis, ['t']=23.502748, ['s']=1.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=x_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=y_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=0.000000, ['s']=1.000000},
			{['c']='move',['p']=coxiscentral, ['a']=x_axis, ['t']=-0.023054, ['s']=1.000000},
			{['c']='move',['p']=coxiscentral, ['a']=y_axis, ['t']=0.521167, ['s']=1.000000},
			{['c']='move',['p']=coxiscentral, ['a']=z_axis, ['t']=14.639137, ['s']=1.000000},
		}
	},
}


Animations['walkAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.355867, ['s']=0.348581},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='move',['p']=espinillad, ['a']=x_axis, ['t']=-2.067409, ['s']=0.000000},
			{['c']='move',['p']=espinillad, ['a']=y_axis, ['t']=1.555296, ['s']=0.000000},
			{['c']='move',['p']=espinillad, ['a']=z_axis, ['t']=7.033658, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.185340, ['s']=0.602940},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=pied, ['a']=x_axis, ['t']=-2.282368, ['s']=0.000000},
			{['c']='move',['p']=pied, ['a']=y_axis, ['t']=3.603570, ['s']=0.000000},
			{['c']='move',['p']=pied, ['a']=z_axis, ['t']=1.080602, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=1.187240, ['s']=0.970927},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='move',['p']=espinillai, ['a']=x_axis, ['t']=2.082659, ['s']=0.000000},
			{['c']='move',['p']=espinillai, ['a']=y_axis, ['t']=-2.114497, ['s']=0.000000},
			{['c']='move',['p']=espinillai, ['a']=z_axis, ['t']=7.350703, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=0.059884, ['s']=0.710428},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=musloi, ['a']=x_axis, ['t']=1.716741, ['s']=0.000000},
			{['c']='move',['p']=musloi, ['a']=y_axis, ['t']=0.232801, ['s']=0.000000},
			{['c']='move',['p']=musloi, ['a']=z_axis, ['t']=13.123219, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.433172, ['s']=0.661419},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=muslod, ['a']=x_axis, ['t']=-1.612402, ['s']=0.000000},
			{['c']='move',['p']=muslod, ['a']=y_axis, ['t']=0.232801, ['s']=0.000000},
			{['c']='move',['p']=muslod, ['a']=z_axis, ['t']=13.123219, ['s']=0.000000},
			{['c']='turn',['p']=coxis, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxis, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxis, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=x_axis, ['t']=-0.028486, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=y_axis, ['t']=0.089688, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=14.548221, ['s']=2.057800},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=-0.172532, ['s']=0.182562},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=piei, ['a']=x_axis, ['t']=2.228573, ['s']=0.000000},
			{['c']='move',['p']=piei, ['a']=y_axis, ['t']=-2.517084, ['s']=0.000000},
			{['c']='move',['p']=piei, ['a']=z_axis, ['t']=1.068017, ['s']=0.000000},
		}
	},
	{
		['time'] = 10,
		['commands'] = {
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=1.142714, ['s']=0.267152},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 15,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.604942, ['s']=0.747225},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.234819, ['s']=0.148438},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=1.079449, ['s']=0.379591},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=-0.238484, ['s']=0.895106},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.155387, ['s']=0.833357},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=14.282305, ['s']=0.797748},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=0.009646, ['s']=0.546534},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 20,
		['commands'] = {
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.462335, ['s']=3.702685},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 25,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.753391, ['s']=0.890692},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.050159, ['s']=1.107960},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.245645, ['s']=1.300139},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=-0.295330, ['s']=0.341071},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.102463, ['s']=0.317542},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=13.519320, ['s']=4.577906},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=0.044354, ['s']=0.208251},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 30,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=1.476120, ['s']=1.445459},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.268485, ['s']=0.436651},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.554621, ['s']=0.617952},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=0.059884, ['s']=0.710428},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.433172, ['s']=0.661419},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=14.327742, ['s']=1.616842},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=-0.287562, ['s']=0.663831},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 45,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=1.253853, ['s']=1.333601},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.317207, ['s']=0.146167},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.814152, ['s']=0.778591},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=0.358253, ['s']=0.895106},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.710958, ['s']=0.833357},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=13.935076, ['s']=1.177998},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=-0.214613, ['s']=0.218846},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 50,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.606681, ['s']=3.883033},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 55,
		['commands'] = {
			{['c']='turn',['p']=espinillad, ['a']=x_axis, ['t']=0.181576, ['s']=2.550628},
			{['c']='turn',['p']=espinillad, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillad, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=x_axis, ['t']=0.486810, ['s']=1.017619},
			{['c']='turn',['p']=pied, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pied, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=x_axis, ['t']=0.863597, ['s']=0.296674},
			{['c']='turn',['p']=espinillai, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=espinillai, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=x_axis, ['t']=0.415098, ['s']=0.341071},
			{['c']='turn',['p']=musloi, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=musloi, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=x_axis, ['t']=-0.763882, ['s']=0.317542},
			{['c']='turn',['p']=muslod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=muslod, ['a']=z_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='move',['p']=coxis, ['a']=z_axis, ['t']=13.519320, ['s']=2.494532},
			{['c']='turn',['p']=piei, ['a']=x_axis, ['t']=-0.081251, ['s']=0.800170},
			{['c']='turn',['p']=piei, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=piei, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
		}
	},
	{
		['time'] = 60,
		['commands'] = {
		}
	},
}

Animations['moveTorsoAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=-0.353574, ['s']=0.683095},
			{['c']='move',['p']=cabeza, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=y_axis, ['t']=-1.154238, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=z_axis, ['t']=25.584267, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=0.212231, ['s']=0.393146},
			{['c']='move',['p']=coxiscentral, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=y_axis, ['t']=0.521167, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=z_axis, ['t']=14.084007, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.338281, ['s']=0.272744},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=0.002078, ['s']=0.004155},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=-0.000154, ['s']=0.000308},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=y_axis, ['t']=1.609871, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=z_axis, ['t']=22.159639, ['s']=0.000000},
		}
	},
	{
		['time'] = 15,
		['commands'] = {
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.474653, ['s']=0.272744},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=0.000000, ['s']=0.004155},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=0.000000, ['s']=0.000308},
		}
	},
	{
		['time'] = 30,
		['commands'] = {
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.329521, ['s']=0.683095},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=-0.180915, ['s']=0.393146},
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.338281, ['s']=0.272744},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=0.002078, ['s']=0.004155},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=-0.000154, ['s']=0.000308},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=0.000000},
		}
	},
	{
		['time'] = 45,
		['commands'] = {
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.474653, ['s']=0.272744},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=0.000000, ['s']=0.004155},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=0.000000, ['s']=0.000308},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=0.000000},
		}
	},
	{
		['time'] = 60,
		['commands'] = {
		}
	},
}

Animations['shootAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=4.176844, ['s']=0.000000},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-6.540286, ['s']=0.000000},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=18.935457, ['s']=0.000000},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=manod, ['a']=x_axis, ['t']=-2.569294, ['s']=0.000000},
			{['c']='move',['p']=manod, ['a']=y_axis, ['t']=-4.105369, ['s']=0.000000},
			{['c']='move',['p']=manod, ['a']=z_axis, ['t']=16.366638, ['s']=0.000000},
			{['c']='turn',['p']=hombrerai, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=hombrerai, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=hombrerai, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=y_axis, ['t']=-0.439716, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=z_axis, ['t']=22.947618, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.344838, ['s']=1.477876},
			{['c']='move',['p']=cabeza, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=y_axis, ['t']=-1.154238, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=z_axis, ['t']=25.584265, ['s']=0.000000},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=-0.371034, ['s']=0.558008},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=0.169439, ['s']=0.969251},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=-0.011375, ['s']=0.078171},
			{['c']='move',['p']=hombroi, ['a']=x_axis, ['t']=3.247565, ['s']=0.000000},
			{['c']='move',['p']=hombroi, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=hombroi, ['a']=z_axis, ['t']=21.408901, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=-0.524960, ['s']=1.277632},
			{['c']='move',['p']=coxiscentral, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=y_axis, ['t']=0.521167, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=z_axis, ['t']=14.084007, ['s']=0.000000},
			{['c']='turn',['p']=manoi, ['a']=x_axis, ['t']=0.448502, ['s']=1.922153},
			{['c']='turn',['p']=manoi, ['a']=y_axis, ['t']=-0.134628, ['s']=0.576979},
			{['c']='turn',['p']=manoi, ['a']=z_axis, ['t']=0.093822, ['s']=0.402095},
			{['c']='move',['p']=manoi, ['a']=x_axis, ['t']=3.931734, ['s']=0.000000},
			{['c']='move',['p']=manoi, ['a']=y_axis, ['t']=-6.272564, ['s']=0.000000},
			{['c']='move',['p']=manoi, ['a']=z_axis, ['t']=17.717812, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=x_axis, ['t']=0.003410, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=z_axis, ['t']=16.852190, ['s']=0.000000},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.569217, ['s']=0.944774},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=-0.010442, ['s']=0.404893},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=-0.295406, ['s']=1.329510},
			{['c']='move',['p']=brazoi, ['a']=x_axis, ['t']=5.153582, ['s']=0.000000},
			{['c']='move',['p']=brazoi, ['a']=y_axis, ['t']=-1.178931, ['s']=0.000000},
			{['c']='move',['p']=brazoi, ['a']=z_axis, ['t']=16.089970, ['s']=0.000000},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=0.032899, ['s']=0.140995},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.308680, ['s']=1.322915},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=-0.014620, ['s']=0.062656},
			{['c']='move',['p']=hombrod, ['a']=x_axis, ['t']=-3.247495, ['s']=0.000000},
			{['c']='move',['p']=hombrod, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=hombrod, ['a']=z_axis, ['t']=21.408901, ['s']=0.000000},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.133771, ['s']=0.573304},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=-0.223675, ['s']=0.958605},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.239206, ['s']=0.374282},
			{['c']='move',['p']=brazod, ['a']=x_axis, ['t']=-7.360277, ['s']=0.000000},
			{['c']='move',['p']=brazod, ['a']=y_axis, ['t']=-1.787073, ['s']=0.000000},
			{['c']='move',['p']=brazod, ['a']=z_axis, ['t']=17.698545, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.311955, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=-0.036414, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=0.003204, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=y_axis, ['t']=1.609871, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=z_axis, ['t']=22.159639, ['s']=0.000000},
		}
	},
	{
		['time'] = 7,
		['commands'] = {
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.284692, ['s']=1.423461},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.245820, ['s']=1.229098},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=-0.200552, ['s']=1.002758},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=2.793333, ['s']=6.917555},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-8.375342, ['s']=9.175284},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=16.566235, ['s']=11.846113},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=0.315588, ['s']=1.577942},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.071443, ['s']=0.357217},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=-0.051801, ['s']=0.259007},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=-0.909519, ['s']=2.692424},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=0.625526, ['s']=2.280434},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=-0.025293, ['s']=0.069591},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.940728, ['s']=1.857557},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=-0.413237, ['s']=2.013971},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=-0.362699, ['s']=0.336464},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=-0.417860, ['s']=2.253794},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.010290, ['s']=1.491949},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=0.015476, ['s']=0.150479},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.194952, ['s']=0.305905},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=-0.174046, ['s']=0.248144},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.219010, ['s']=0.100981},
		}
	},
	{
		['time'] = 13,
		['commands'] = {
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.220266, ['s']=0.276113},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.742915, ['s']=2.130409},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=-0.046789, ['s']=0.658983},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=3.514524, ['s']=3.090819},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-7.536891, ['s']=3.593361},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=13.727485, ['s']=12.166071},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=-0.280523, ['s']=2.554764},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.113950, ['s']=0.182172},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=-0.361584, ['s']=1.327640},
			{['c']='move',['p']=manod, ['a']=x_axis, ['t']=-2.701436, ['s']=0.566321},
			{['c']='move',['p']=manod, ['a']=y_axis, ['t']=-3.980155, ['s']=0.536631},
			{['c']='move',['p']=manod, ['a']=z_axis, ['t']=16.184786, ['s']=0.779367},
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.582738, ['s']=1.019571},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=-0.623604, ['s']=0.422758},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.963517, ['s']=0.097668},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=-0.573325, ['s']=0.686095},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=-0.467263, ['s']=0.448133},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=-0.104571, ['s']=1.342667},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.001098, ['s']=0.039398},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=0.324863, ['s']=1.325943},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=-0.328656, ['s']=2.244032},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=-0.311060, ['s']=0.587205},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.573324, ['s']=1.518490},
		}
	},
	{
		['time'] = 20,
		['commands'] = {
		}
	},
}


Animations['restoreShootAnimation'] = {
	{
		['time'] = 0,
		['commands'] = {
			{['c']='turn',['p']=cuello, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cuello, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cuello, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=cuello, ['a']=x_axis, ['t']=0.003410, ['s']=0.000000},
			{['c']='move',['p']=cuello, ['a']=y_axis, ['t']=-0.739189, ['s']=0.000000},
			{['c']='move',['p']=cuello, ['a']=z_axis, ['t']=22.407827, ['s']=0.000000},
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.284692, ['s']=0.322132},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.245820, ['s']=2.485477},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=-0.200552, ['s']=0.768813},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=2.793333, ['s']=3.605956},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-8.375342, ['s']=4.192255},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=16.566235, ['s']=14.193749},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=0.315588, ['s']=2.980558},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.071443, ['s']=0.212533},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=-0.051801, ['s']=1.548914},
			{['c']='move',['p']=manod, ['a']=x_axis, ['t']=-2.569294, ['s']=0.660708},
			{['c']='move',['p']=manod, ['a']=y_axis, ['t']=-4.105369, ['s']=0.626069},
			{['c']='move',['p']=manod, ['a']=z_axis, ['t']=16.366638, ['s']=0.909262},
			{['c']='turn',['p']=hombrerai, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=hombrerai, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=hombrerai, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=y_axis, ['t']=-0.439716, ['s']=0.000000},
			{['c']='move',['p']=hombrerai, ['a']=z_axis, ['t']=22.947618, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=-0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.344838, ['s']=1.189499},
			{['c']='move',['p']=cabeza, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=y_axis, ['t']=-1.154238, ['s']=0.000000},
			{['c']='move',['p']=cabeza, ['a']=z_axis, ['t']=25.584265, ['s']=0.000000},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=-0.909519, ['s']=0.000000},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=0.625526, ['s']=0.000000},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=-0.025293, ['s']=0.000000},
			{['c']='move',['p']=hombroi, ['a']=x_axis, ['t']=3.247565, ['s']=0.000000},
			{['c']='move',['p']=hombroi, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=hombroi, ['a']=z_axis, ['t']=21.408901, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=-0.524960, ['s']=0.493218},
			{['c']='move',['p']=coxiscentral, ['a']=x_axis, ['t']=-0.023054, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=y_axis, ['t']=0.521167, ['s']=0.000000},
			{['c']='move',['p']=coxiscentral, ['a']=z_axis, ['t']=14.084007, ['s']=0.000000},
			{['c']='turn',['p']=manoi, ['a']=x_axis, ['t']=0.448502, ['s']=0.000000},
			{['c']='turn',['p']=manoi, ['a']=y_axis, ['t']=-0.134628, ['s']=0.000000},
			{['c']='turn',['p']=manoi, ['a']=z_axis, ['t']=0.093822, ['s']=0.000000},
			{['c']='move',['p']=manoi, ['a']=x_axis, ['t']=3.931734, ['s']=0.000000},
			{['c']='move',['p']=manoi, ['a']=y_axis, ['t']=-6.272563, ['s']=0.000000},
			{['c']='move',['p']=manoi, ['a']=z_axis, ['t']=17.717812, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=pecho, ['a']=z_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=x_axis, ['t']=0.003410, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=pecho, ['a']=z_axis, ['t']=16.852190, ['s']=0.000000},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.940728, ['s']=0.113946},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=-0.413237, ['s']=0.800443},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=-0.362699, ['s']=0.522821},
			{['c']='move',['p']=brazoi, ['a']=x_axis, ['t']=5.153582, ['s']=0.000000},
			{['c']='move',['p']=brazoi, ['a']=y_axis, ['t']=-1.178931, ['s']=0.000000},
			{['c']='move',['p']=brazoi, ['a']=z_axis, ['t']=16.089970, ['s']=0.000000},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=-0.417860, ['s']=1.566444},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.010290, ['s']=0.045964},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=0.015476, ['s']=1.546934},
			{['c']='move',['p']=hombrod, ['a']=x_axis, ['t']=-3.247495, ['s']=0.000000},
			{['c']='move',['p']=hombrod, ['a']=y_axis, ['t']=-0.477668, ['s']=0.000000},
			{['c']='move',['p']=hombrod, ['a']=z_axis, ['t']=21.408901, ['s']=0.000000},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.194952, ['s']=2.618038},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=-0.174046, ['s']=0.685072},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.219010, ['s']=1.771571},
			{['c']='move',['p']=brazod, ['a']=x_axis, ['t']=-7.360277, ['s']=0.000000},
			{['c']='move',['p']=brazod, ['a']=y_axis, ['t']=-1.787073, ['s']=0.000000},
			{['c']='move',['p']=brazod, ['a']=z_axis, ['t']=17.698545, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=x_axis, ['t']=0.311955, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=y_axis, ['t']=-0.036414, ['s']=0.000000},
			{['c']='turn',['p']=capa, ['a']=z_axis, ['t']=0.003204, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=x_axis, ['t']=-0.005967, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=y_axis, ['t']=1.609871, ['s']=0.000000},
			{['c']='move',['p']=capa, ['a']=z_axis, ['t']=22.159639, ['s']=0.000000},
		}
	},
	{
		['time'] = 6,
		['commands'] = {
			{['c']='turn',['p']=rifle, ['a']=x_axis, ['t']=0.000000, ['s']=1.220110},
			{['c']='turn',['p']=rifle, ['a']=y_axis, ['t']=0.000000, ['s']=1.053512},
			{['c']='turn',['p']=rifle, ['a']=z_axis, ['t']=0.000000, ['s']=0.859507},
			{['c']='move',['p']=rifle, ['a']=x_axis, ['t']=4.176844, ['s']=5.929333},
			{['c']='move',['p']=rifle, ['a']=y_axis, ['t']=-6.540286, ['s']=7.864529},
			{['c']='move',['p']=rifle, ['a']=z_axis, ['t']=18.935457, ['s']=10.153811},
			{['c']='turn',['p']=manod, ['a']=x_axis, ['t']=0.000000, ['s']=1.352522},
			{['c']='turn',['p']=manod, ['a']=y_axis, ['t']=0.000000, ['s']=0.306186},
			{['c']='turn',['p']=manod, ['a']=z_axis, ['t']=0.000000, ['s']=0.222006},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=-0.371034, ['s']=2.307792},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=0.169439, ['s']=1.954658},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=-0.011375, ['s']=0.059649},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.569217, ['s']=1.592191},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=-0.010442, ['s']=1.726261},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=-0.295406, ['s']=0.288397},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=0.032899, ['s']=1.931824},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.308680, ['s']=1.278813},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=-0.014620, ['s']=0.128982},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.133771, ['s']=0.262204},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=-0.223675, ['s']=0.212695},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.239206, ['s']=0.086555},
		}
	},
	{
		['time'] = 13,
		['commands'] = {
			{['c']='turn',['p']=cabeza, ['a']=x_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=y_axis, ['t']=0.000000, ['s']=0.000000},
			{['c']='turn',['p']=cabeza, ['a']=z_axis, ['t']=0.000000, ['s']=1.477876},
			{['c']='turn',['p']=hombroi, ['a']=x_axis, ['t']=-0.240832, ['s']=0.558008},
			{['c']='turn',['p']=hombroi, ['a']=y_axis, ['t']=-0.056719, ['s']=0.969251},
			{['c']='turn',['p']=hombroi, ['a']=z_axis, ['t']=0.006865, ['s']=0.078171},
			{['c']='turn',['p']=coxiscentral, ['a']=z_axis, ['t']=-0.226846, ['s']=1.277632},
			{['c']='turn',['p']=manoi, ['a']=x_axis, ['t']=0.000000, ['s']=1.922153},
			{['c']='turn',['p']=manoi, ['a']=y_axis, ['t']=0.000000, ['s']=0.576979},
			{['c']='turn',['p']=manoi, ['a']=z_axis, ['t']=0.000000, ['s']=0.402095},
			{['c']='turn',['p']=brazoi, ['a']=x_axis, ['t']=0.348769, ['s']=0.944774},
			{['c']='turn',['p']=brazoi, ['a']=y_axis, ['t']=0.084033, ['s']=0.404893},
			{['c']='turn',['p']=brazoi, ['a']=z_axis, ['t']=0.014813, ['s']=1.329510},
			{['c']='turn',['p']=hombrod, ['a']=x_axis, ['t']=0.000000, ['s']=0.140995},
			{['c']='turn',['p']=hombrod, ['a']=y_axis, ['t']=0.000000, ['s']=1.322915},
			{['c']='turn',['p']=hombrod, ['a']=z_axis, ['t']=0.000000, ['s']=0.062656},
			{['c']='turn',['p']=brazod, ['a']=x_axis, ['t']=0.000000, ['s']=0.573304},
			{['c']='turn',['p']=brazod, ['a']=y_axis, ['t']=0.000000, ['s']=0.958605},
			{['c']='turn',['p']=brazod, ['a']=z_axis, ['t']=-0.151874, ['s']=0.374282},
		}
	},
	{
		['time'] = 20,
		['commands'] = {
		}
	},
}

--------------------------------------------------------------------------------
-- funcs
--------------------------------------------------------------------------------

function constructSkeleton(unit, piece, offset)
    if (offset == nil) then
        offset = {0,0,0};
    end

    local bones = {};
    local info = Spring.GetUnitPieceInfo(unit,piece);

    for i=1,3 do
        info.offset[i] = offset[i]+info.offset[i];
    end 

    bones[piece] = info.offset;
    local map = Spring.GetUnitPieceMap(unit);
    local children = info.children;

    if (children) then
        for i, childName in pairs(children) do
            local childId = map[childName];
            local childBones = constructSkeleton(unit, childId, info.offset);
            for cid, cinfo in pairs(childBones) do
                bones[cid] = cinfo;
            end
        end
    end        
    return bones;
end

function script.Create()
    local map = Spring.GetUnitPieceMap(unitID);
    local offsets = constructSkeleton(unitID,map.Scene, {0,0,0});
    
    for a,anim in pairs(Animations) do
        for i,keyframe in pairs(anim) do
            local commands = keyframe.commands;
            for k,command in pairs(commands) do
                -- commands are described in (c)ommand,(p)iece,(a)xis,(t)arget,(s)peed format
                -- the t attribute needs to be adjusted for move commands from blender's absolute values
                if (command.c == "move") then
                    local adjusted =  command.t - (offsets[command.p][command.a]);
                    Animations[a][i]['commands'][k].t = command.t - (offsets[command.p][command.a]);
                end
            end
        end
    end
end
            
local animCmd = {['turn']=Turn,['move']=Move};
function PlayAnimation(animname)
    local anim = Animations[animname];
    for i = 1, #anim do
        local commands = anim[i].commands;
        for j = 1,#commands do
            local cmd = commands[j];
            animCmd[cmd.c](cmd.p,cmd.a,cmd.t,cmd.s);
        end
        if(i < #anim) then
            local t = anim[i+1]['time'] - anim[i]['time'];
            Sleep(t*33); -- sleep works on milliseconds
        end
    end
end

-----------------------WALK-----------------------

local function Walk()
	Signal(SIG_WALK)
	SetSignalMask(SIG_WALK)
	
	isMoving = true
	while true do
		PlayAnimation('walkAnimation')
		Sleep(0)
	end
end

local function MoveTorso()
	Signal(SIG_WALK1)
	SetSignalMask(SIG_WALK1)
	while true do
		if not isShooting then
			PlayAnimation('moveTorsoAnimation')
		end
		Sleep(0)
	end
end

local function RestorePose()
	Signal(SIG_WALK)
	Signal(SIG_WALK1)
	SetSignalMask(SIG_WALK)
	SetSignalMask(SIG_WALK1)
	PlayAnimation('restoreLegsAnimation')
end

local function RestorePoseTorso()
	Signal(SIG_RESTORE)
	SetSignalMask(SIG_RESTORE)
	Sleep(RESTORE_DELAY_SHOOT)
	if not isShooting then
		PlayAnimation('restoreTorsoAnimation')
	else
		PlayAnimation('restoreShootAnimation')
	end
	isShooting = false
	aimWeapon = false
end

local function PoseShoot()
	Signal(SIG_AIM1)
	SetSignalMask(SIG_AIM1)
	PlayAnimation('shootAnimation')
	aimWeapon = true
end

function script.StartMoving(heading)
	
	Turn(coxis, z_axis, heading, math.rad(80))
	
	StartThread (Walk)
	StartThread (MoveTorso)
end

function script.StopMoving()
	isMoving = false
	StartThread(RestorePoseTorso)
	StartThread(RestorePose)
end


---AIMING & SHOOTING---

function script.Shot(num)
	--Spring.Echo(num)
end

function script.AimFromWeapon()
	return rifle
end

function script.QueryWeapon() 
	return flare
end
--must return true to allow the weapon to shot. return false denies the weapon from shooting
--can be used delay the shooting until a "turn turret" animation is completed

function script.AimWeapon(num, heading, pitch )
	--make sure the aiming animation is only run once
	Signal(SIG_AIM)
	SetSignalMask(SIG_AIM)
	Turn(coxis, z_axis, heading, math.rad(160))
	WaitForTurn (coxis, z_axis)
	if not isShooting then
		StartThread(PoseShoot)
		Sleep(DELAY_SHOOT)
	end
	StartThread(RestorePoseTorso)
	isShooting = true
	return true
end

--called after the weapon has fired
function script.FireWeapon1()
end

function script.FireWeapon3()
end


----death animation: fall over & explode
function script.Killed(recentDamage, maxHealth)

	--Explode (chasis, SFX.SHATTER)
	--Explode (cristal, SFX.FIRE)


end

